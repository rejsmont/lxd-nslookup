# LXD nslookup configuration file
# Copy this to /etc/lxd_nslookup.yml and modify as needed

# Server configuration
server:
  host: '127.0.0.1'  # IP address to bind to (use 0.0.0.0 for all interfaces)
  port: 8081          # Port number to bind to

# LXD client configuration
lxd_client:
  endpoint: "https://[2001:db8::3]:8443"
  cert_file: "/etc/lxc/client.crt"
  key_file: "/etc/lxc/client.key"
  verify_cert: "/etc/lxd/servercerts/lxd.crt"

# Domain suffixes to match against
# The script will respond to DNS queries for containers with these suffixes
domains: ['lxd', 'lxd.example.org']

# Network interface to scan for container IP addresses
interface: 'eth0'

# SOA (Start of Authority) record configuration
# Used when responding to SOA queries for the managed domains
soa:
  primary_ns: 'ns1.lxd.example.org'     # Primary nameserver
  admin_email: 'admin.lxd.example.org'  # Admin email (replace @ with .)
  # Note: serial is auto-generated from current timestamp
  refresh: 3600                         # Refresh interval (1 hour)
  retry: 1800                          # Retry interval (30 minutes)
  expire: 604800                       # Expire time (1 week)
  minimum: 86400                       # Minimum TTL (1 day)

# Alias configuration
# Each item defines an alias cname and either a "pattern" (regex matching container names)
# or an explicit list of "hosts" (container names). When a query's left-hand name
# matches the group's cname, the service will return the IPs of all matched containers.
aliases:
  dbs: '^db-srv-.*'     # all containers whose name starts with db-srv-
  web: ['web1', 'web2'] # explicit host list
